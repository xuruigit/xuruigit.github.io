<!DOCTYPE html>












  


<html class="theme-next mist use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2"/>
<meta name="theme-color" content="#222">












<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=6.4.1" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.4.1">


  <link rel="icon" type="image/png" sizes="32x32" href="/favicon.ico?v=6.4.1">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.4.1">


  <link rel="mask-icon" href="/images/logo.svg?v=6.4.1" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '6.4.1',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="keywords" content="DDD">
<meta property="og:type" content="article">
<meta property="og:title" content="领域驱动设计-聚合">
<meta property="og:url" content="http://xurui.pro/2019/05/22/领域驱动设计-聚合根/index.html">
<meta property="og:site_name" content="徐锐">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="http://xurui.pro/2019/05/22/领域驱动设计-聚合根/DDD-1.png">
<meta property="og:image" content="http://xurui.pro/2019/05/22/领域驱动设计-聚合根/DDD-4.jpg">
<meta property="og:image" content="http://xurui.pro/2019/05/22/领域驱动设计-聚合根/DDD-2.png">
<meta property="og:updated_time" content="2019-05-24T05:35:36.569Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="领域驱动设计-聚合">
<meta name="twitter:image" content="http://xurui.pro/2019/05/22/领域驱动设计-聚合根/DDD-1.png">






  <link rel="canonical" href="http://xurui.pro/2019/05/22/领域驱动设计-聚合根/"/>



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>领域驱动设计-聚合 | 徐锐</title>
  









  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">徐锐</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">
    <a href="/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-home"></i> <br />首页</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">
    <a href="/archives/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />归档</a>
  </li>

      
      
    </ul>
  

  
    

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://xurui.pro/2019/05/22/领域驱动设计-聚合根/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="徐锐">
      <meta itemprop="description" content="基于Hexo搭建的个人博客">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="徐锐">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">领域驱动设计-聚合
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-05-22 09:29:22" itemprop="dateCreated datePublished" datetime="2019-05-22T09:29:22+08:00">2019-05-22</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-05-24 13:35:36" itemprop="dateModified" datetime="2019-05-24T13:35:36+08:00">2019-05-24</time>
              
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p><img src="/2019/05/22/领域驱动设计-聚合根/DDD-1.png" alt="DDD-1"></p>
<a id="more"></a>
<h2 id="上期回顾"><a href="#上期回顾" class="headerlink" title="上期回顾"></a>上期回顾</h2><p>我们先来回顾一下上一次 <strong>DDD</strong> 分享的内容：</p>
<ul>
<li><p>什么是领域</p>
<blockquote>
<p>每个系统/模块都有自己的核心业务，这个核心业务解决的问题就可以理解为领域，对称到我们现在的系统中，协议可以认为是一个领域，商品也可以认为是一个领域。</p>
</blockquote>
</li>
<li><p>什么是设计</p>
<blockquote>
<p>设计是指领域模型的设计，DDD是一种模型驱动开发的思想，强调领域模型是整个系统的核心，对称到我们现在的系统中可以理解为商品两层模型的设计，商品模型是商品中心的核心。</p>
</blockquote>
</li>
<li><p>什么是驱动</p>
<blockquote>
<p>首先是领域驱动领域模型设计，然后领域模型驱动代码实现，我们只要保证领域模型的设计是正确的，就能确定领域模型可以解决领域中的核心问题，然后我们保证代码的实现是按领域模型的意图去实现的，就能保证最后的产出的结果是正确的（用户想要的）</p>
</blockquote>
</li>
<li><p>为什么要用DDD？解决什么问题？        </p>
<blockquote>
<p>DDD是一种处理高度复杂域的设计方法，围绕业务概念构建领域模型来控制业务的复杂性，以解决软件难以理解，难以演化等问题。最终目标还是<strong>高内聚，底耦合</strong>。</p>
</blockquote>
<p>  我的理解，DDD中强调开发前先设计好领域模型，模型去驱动开发，而不是面向过程的想到哪写到哪。如果前期的领域模型设计的不好，不够抽象，后面的维护和迭代就困难重重，比如数据结构设计不合理，代码到处冗余，改BUG到处引入新的BUG，新人上手困难等。而那时如果再想重构模型，那要付出的代价会比一开始重新开发还要大，因为还要考虑兼容历史的数据，数据迁移，如何平滑发布等各种头疼的问题，进而天天加班……</p>
</li>
</ul>
<h2 id="本期目标：聚合"><a href="#本期目标：聚合" class="headerlink" title="本期目标：聚合"></a>本期目标：聚合</h2><p>上面说到领域驱动设计的核心是建立正确的领域模型，那我们如何去建立领域模型？</p>
<h3 id="理解领域"><a href="#理解领域" class="headerlink" title="理解领域"></a>理解领域</h3><p>理解领域知识是基础，建模前至少要对这个领域非常了解，对领域中的各种业务场景和业务规则非常清楚。</p>
<h3 id="拆分领域"><a href="#拆分领域" class="headerlink" title="拆分领域"></a>拆分领域</h3><p>实际业务场景中，一个领域的问题往往太大太复杂，涉及到的领域概念、业务规则、交互流程太多，导致我们无法直接真对这个领域进行建模，所以第一步我们要把这个领域拆分，拆成一个个子域，比如我们公司的 <strong>政采云</strong> 这个领域太大，我们先拆分成 <strong>协议中心域</strong> 、<strong>商品中心域</strong> 、<strong>用户中心域</strong> ，这么划分可能还是很粗，比如 <strong>商品中心域</strong> 继续拆成 <strong>类目域</strong> 、<strong>商品域</strong>。<br>拆分完子域，接下来最关键的就是要理清每个子域的边界，搞清楚哪些子域是核心子域，哪些是非核心子域，哪些是公共支撑子域，以及他们之间的关联关系是什么。(比如协议中心域中的协议子域和工作流子域)<br>以上子域的划分看起来很简单，这是因为我们对整个大域很了解了，但是如果我们遇到一个冷门的域，就没那么容易划分出子域并搞清楚边界了，比如我们目前的协议中心，它是一个冷门域，你暂时对业务不熟悉又找不到可参考的竞品，怎么划分子域呢？（比如为什么现在的协议中心的域中包含商品发布？）</p>
<h3 id="细化领域"><a href="#细化领域" class="headerlink" title="细化领域"></a>细化领域</h3><p>细化每个子域，进一步明确每个子域的核心关注点，从领域概念、业务规则、交互场景、业务流程等维度梳理系统应该具备的功能。</p>
<h3 id="领域模型设计"><a href="#领域模型设计" class="headerlink" title="领域模型设计"></a>领域模型设计</h3><p>好的领域模型可以让产品结构清楚，修改更方便，演进成本更低。在一个开发团队里，架构师很重要，他决定了软件结构，这个结构决定了软件未来的可读性，可扩展性和可演进性。通常来说架构师设计领域模型，开发人员基于这个领域模型进行开发。</p>
<h4 id="一般步骤"><a href="#一般步骤" class="headerlink" title="一般步骤"></a>一般步骤</h4><ol>
<li>根据需求建立一个初步的领域模型，识别出一些明显的领域概念以及它们的关联，关联可以暂时没有方向但需要有（1：1，1：N，M：N）这些关系；可以用文字精确的没有歧义的描述出每个领域概念的涵义以及包含的主要信息</li>
<li>分析主要的软件应用程序功能，识别出主要的应用层的类</li>
<li>进一步分析领域模型，识别出哪些是实体，哪些是值对象，哪些是领域服务；</li>
<li>分析关联，通过对业务的更深入分析以及各种软件设计原则及性能方面的权衡，明确关联的方向或者去掉一些不需要的关联；</li>
<li><strong>找出聚合边界及聚合根</strong>，这是一件很有难度的事情；因为你在分析的过程中往往会碰到很多模棱两可的难以清晰判断的选择问题，所以，需要我们平时一些分析经验的积累才能找出正确的聚合根；</li>
<li>为聚合根配备仓储，一般情况下是为一个聚合分配一个仓储，此时只要设计好仓储的接口即可；</li>
<li>走查场景，确定我们设计的领域模型能够有效地解决业务需求；</li>
<li>考虑如何创建领域实体或值对象，是通过工厂还是直接通过构造函数；</li>
<li>停下来重构模型。寻找模型中觉得有些疑问或者是蹩脚的地方，比如思考一些对象应该通过关联导航得到还是应该从仓储获取？聚合设计的是否正确？考虑模型的性能怎样，等等  </li>
</ol>
<p>领域建模是一个不断重构，持续完善模型的过程，大家会在讨论中将变化的部分反映到模型中，从而是模型不断细化并朝正确的方向走。领域建模是领域专家、设计人员、开发人员之间沟通交流的过程，是大家工作和思考问题的基础。<br>这里涉及到很多建模工具/概念：聚合、实体、值对象、工厂、仓储、领域服务等，这次先把 <strong>聚合及聚合根</strong> 搞清楚。</p>
<h2 id="聚合（Aggregate）"><a href="#聚合（Aggregate）" class="headerlink" title="聚合（Aggregate）"></a>聚合（Aggregate）</h2><h3 id="聚合的概念"><a href="#聚合的概念" class="headerlink" title="聚合的概念"></a>聚合的概念</h3><blockquote>
<p>聚合，它通过定义对象之间清晰的所属关系和边界来实现领域模型的内聚，并避免了错综复杂的难以维护的对象关系网的形成。聚合定义了一组具有内聚关系的相关对象的集合，我们把聚合看作是一个修改数据的单元。</p>
</blockquote>
<p>👆上面是只是概念，我们该怎么去理解聚合？</p>
<p><img src="/2019/05/22/领域驱动设计-聚合根/DDD-4.jpg" alt="DDD-4"></p>
<p>每个聚合都有一个根和一个边界，边界定义了聚合里都有什么，根则是聚合中的一个特定实体，外部对象只可以引用根。</p>
<p>我的理解，聚合的主要目的有2个：</p>
<ol>
<li>封装规则，模型内聚，避免形式复杂的对象关系网（比如协议中不应该直接引用协议商品、操作协议商品）</li>
<li>数据一致性（删除配件的同时也删除配件的图片）</li>
</ol>
<h3 id="什么是聚合根，聚合根、实体、值对象的区别与联系"><a href="#什么是聚合根，聚合根、实体、值对象的区别与联系" class="headerlink" title="什么是聚合根，聚合根、实体、值对象的区别与联系"></a>什么是聚合根，聚合根、实体、值对象的区别与联系</h3><p>看图说话<br><img src="/2019/05/22/领域驱动设计-聚合根/DDD-2.png" alt="DDD-2"></p>
<h3 id="聚合的特征"><a href="#聚合的特征" class="headerlink" title="聚合的特征"></a>聚合的特征</h3><ol>
<li>每个聚合有一个根和一个边界，边界定义了一个聚合内部有哪些实体或值对象，根是聚合内的某个实体；</li>
<li>聚合内部的对象之间可以相互引用，但是聚合外部如果要访问聚合内部的对象时，必须通过聚合根开始导航，绝对不能绕过聚合根直接访问聚合内的对象，也就是说聚合根是外部可以保持 对它的引用的唯一元素；</li>
<li>聚合内除根以外的其他实体的唯一标识都是本地标识，也就是只要在聚合内部保持唯一即可，因为它们总是从属于这个聚合的；</li>
<li>聚合根负责与外部其他对象打交道并维护自己内部的业务规则；</li>
<li>基于聚合的以上概念，我们可以推论出从数据库查询时的单元也是以聚合为一个单元，也就是说我们不能直接查询聚合内部的某个非根的对象；</li>
<li>聚合内部的对象可以保持对其他聚合根的引用；</li>
<li>删除一个聚合根时必须同时删除该聚合内的所有相关对象，因为他们都同属于一个聚合，是一个完整的概念；</li>
</ol>
<h3 id="如何识别聚合？"><a href="#如何识别聚合？" class="headerlink" title="如何识别聚合？"></a>如何识别聚合？</h3><p>我觉得这个需要从业务的角度深入分析哪些对象它们的关系是内聚的，即我们会把他们看成是一个整体来考虑的；然后这些对象我们就可以把它们放在一个聚合内。<br>所谓关系是内聚的，是指这些对象之间必须保持一个固定规则，固定规则是指在数据变化时必须保持不变的一致性规则。当我们在修改一个聚合时，我们必须在事务级别确保整个聚合内的所有对象满足这个固定规则。作为一条建议，聚合尽量不要太大，否则即便能够做到在事务级别保持聚合的业务规则完整性，也可能会带来一定的性能问题。<br>有分析报告显示，通常在大部分领域模型中，有70%的聚合通常只有一个实体，即聚合根，该实体内部没有包含其他实体，只包含一些值对象；另外30%的聚合中，基本上也只包含两到三个实体。这意味着大部分的聚合都只是一个实体，该实体同时也是聚合根。</p>
<h3 id="如何识别聚合根？"><a href="#如何识别聚合根？" class="headerlink" title="如何识别聚合根？"></a>如何识别聚合根？</h3><p>如果一个聚合只有一个实体，那么这个实体就是聚合根；如果有多个实体，那么我们可以思考聚合内哪个对象有独立存在的意义并且可以和外部直接进行交互。</p>
<h3 id="聚合设计的几个原则"><a href="#聚合设计的几个原则" class="headerlink" title="聚合设计的几个原则"></a>聚合设计的几个原则</h3><ul>
<li><p><strong>聚合是用来封装真正的不变性，而不是简单的将对象组合在一起</strong></p>
<p>  这个原则，就是强调聚合的真正用途除了封装我们本身所关心的信息外，最主要的目的是为了封装业务规则，保证数据的一致性。当我们在设计聚合时，要多想想当前聚合封装了哪些业务规则，实现了哪些数据一致性。<br>比如配件是一个聚合，保存配件时，配件必须有品牌、类目，必须包含图片等</p>
</li>
<li><p><strong>聚合内强一致性，聚合之间最终一致性</strong></p>
<p>  一些基于DDD的架构中，聚合根之间的交互是异步的，每个聚合根做了任何状态变更后，会产生相应的领域事件，通知相应的聚合根去做必要的处理。<br>  对标到我们的应用中可以理解为，协议的聚合中不包含商品，在协议变更后，只需要保证协议变更的一致性，异步通知商品聚合根做相应变更。</p>
</li>
<li><p><strong>聚合应尽量设计的小</strong></p>
<p>  如果聚合设计的比较大，包含很多实体，一方面为保证一致性会限制系统的性能，另一方面”业务觉得聚合，业务改变聚合”，当业务发生变化时大聚合的拆分重构成本也更高。</p>
</li>
<li><p><strong>聚合之间通过ID关联</strong></p>
<p>  不使用引用关联，可以让聚合的边界更为清晰</p>
</li>
</ul>
<h2 id="下一期？"><a href="#下一期？" class="headerlink" title="下一期？"></a>下一期？</h2><p>##参考资料</p>
<ul>
<li><a href="https://www.cnblogs.com/netfocus/archive/2011/10/10/2204949.html" target="_blank" rel="noopener">https://www.cnblogs.com/netfocus/archive/2011/10/10/2204949.html</a></li>
<li><a href="http://www.cnblogs.com/netfocus/p/3307971.html" target="_blank" rel="noopener">http://www.cnblogs.com/netfocus/p/3307971.html</a></li>
<li><a href="https://www.cnblogs.com/laozhang-is-phi/p/9916785.html" target="_blank" rel="noopener">https://www.cnblogs.com/laozhang-is-phi/p/9916785.html</a></li>
</ul>

      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/DDD/" rel="tag"># DDD</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/05/09/MySql的事务隔离/" rel="next" title="MySql的事务隔离">
                <i class="fa fa-chevron-left"></i> MySql的事务隔离
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/06/13/MySql-CPU使用率过高/" rel="prev" title="MySql-CPU使用率过高">
                MySql-CPU使用率过高 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">徐锐</p>
              <p class="site-description motion-element" itemprop="description">基于Hexo搭建的个人博客</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">15</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">12</span>
                    <span class="site-state-item-name">标签</span>
                  
                </div>
              
            </nav>
          

          

          

          
          

          
          

          
            
          
          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#上期回顾"><span class="nav-number">1.</span> <span class="nav-text">上期回顾</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#本期目标：聚合"><span class="nav-number">2.</span> <span class="nav-text">本期目标：聚合</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#理解领域"><span class="nav-number">2.1.</span> <span class="nav-text">理解领域</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#拆分领域"><span class="nav-number">2.2.</span> <span class="nav-text">拆分领域</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#细化领域"><span class="nav-number">2.3.</span> <span class="nav-text">细化领域</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#领域模型设计"><span class="nav-number">2.4.</span> <span class="nav-text">领域模型设计</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#一般步骤"><span class="nav-number">2.4.1.</span> <span class="nav-text">一般步骤</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#聚合（Aggregate）"><span class="nav-number">3.</span> <span class="nav-text">聚合（Aggregate）</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#聚合的概念"><span class="nav-number">3.1.</span> <span class="nav-text">聚合的概念</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#什么是聚合根，聚合根、实体、值对象的区别与联系"><span class="nav-number">3.2.</span> <span class="nav-text">什么是聚合根，聚合根、实体、值对象的区别与联系</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#聚合的特征"><span class="nav-number">3.3.</span> <span class="nav-text">聚合的特征</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#如何识别聚合？"><span class="nav-number">3.4.</span> <span class="nav-text">如何识别聚合？</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#如何识别聚合根？"><span class="nav-number">3.5.</span> <span class="nav-text">如何识别聚合根？</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#聚合设计的几个原则"><span class="nav-number">3.6.</span> <span class="nav-text">聚合设计的几个原则</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#下一期？"><span class="nav-number">4.</span> <span class="nav-text">下一期？</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">徐锐</span>

  

  
</div>




  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动 v3.4.4</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 – <a class="theme-link" target="_blank" href="https://theme-next.org">NexT.Mist</a> v6.4.1</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    
	
    

    
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.4.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.4.1"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=6.4.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=6.4.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.4.1"></script>



  



  










  





  

  

  

  

  
  

  

  

  

  

  

</body>
</html>
